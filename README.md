# 為替ヘッジ比較ツール（オプション vs 借入）

Flaskで動く簡易ツールです。**オプション購入額（%/月）**、**ドル金利**、**円金利**、**スポット（JPY/USD）**、**期間（月）**をパラメータにして、プットオプション購入とドル借入のコスト・有利水準を比較します。

> 教育目的の簡易モデルです。実務ではボラティリティ、権利行使価格、プレミアムの見積り、先物レート（カバード・インタレスト・パリティ）などを必ず考慮してください。

## ローカル実行

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
python app.py
# ブラウザで http://127.0.0.1:5000 を開く
```

## Render などでのデプロイ

- `requirements.txt`, `Procfile`, `runtime.txt` を同梱しています。
- Start command は `gunicorn app:app` を指定してください。
- Python バージョンは `runtime.txt` の `python-3.11.9` が参照されます。

## 計算の要点

- **借入コスト（USD）** = 元本 × max(ドル金利 − 円金利, 0) × 期間（月/12）  
  JPY換算は基準レートで乗算。

- **オプション料（USD）** = 元本 × オプション料（%/月） × 期間（月）  
  JPY換算は基準レートで乗算。

- **オプションが借入より有利になる円安幅（円/ドル）**  
  \[ ΔJPY > (オプション料 − 借入コスト) × 基準レート / 元本 \]

- **オプション単体の損益分岐（円/ドル）**  
  \[ ΔJPY > オプション料 × 基準レート / 元本 \]

- シナリオ表は ±5円の変動範囲を例示し、オプション・借入の損益（JPY換算）を比較します。
